# rotary_inverted_pendulum
 lqr control over rotary inverted pendulum

[<img src="data:image/jpeg;base64,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" width="600" height="300"/>](https://www.youtube.com/embed/https://youtu.be/KOM0r-w6caM)
 

# Description
lqr control method used to control a Futura inverted pendulum . modeled , simulated and tested in real life

# usage
- download the zip file
- add to your MATLAB path
- run all2datafile.m 
- add motor_parametrs.mat to your workspace which were estimated using the motor parameters folder
- run mod_lin.m file to linearize the pyhsical model on simscape
- run lqr.m
- run simulink simulation
# adding your own physical model to the system
- download the zip file
- use run_motor.m found in  motor_parametrs_estimation to estimate your motor paramters
- export your pyhsical model from CAD and import it to the mod_inverted_pend.slx found in the other folder
- run mod_lin.m
- adjust Q,R matrixes and run lqr.m
- monitor the simulation

# prequesites 
if you are using the Hardware in the loop simulink model in the real life application:
- Simulink Hardware Support package for arduino
- Drivers guide 

if you are using the simulink model in the real life application:
- Arduinoio
